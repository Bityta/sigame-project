# Найденные проблемы в проде

## Критичные проблемы

### 1. Кнопки судейства не появляются после фазы ответа
**Файл**: `tests/judge-buttons.spec.ts`
**Описание**: После фазы `answering` кнопки судейства (верно/неверно) не появляются у хоста в течение 35 секунд. Тест ожидает появления `.game-page__judging-buttons`, но они не появляются.

**Возможные причины**:
- Игра не переходит в статус `answer_judging` после `answering`
- Кнопки судейства не отображаются в статусе `answer_judging`
- Таймер ответа не завершается корректно

**Статус**: ✅ **ИСПРАВЛЕНО** (13.12.2025)
- **Причина**: Ошибка React #310 - хуки `useEffect` вызывались после условных возвратов, что нарушало правила хуков React
- **Решение**: Все хуки перенесены ДО условных возвратов в компоненте `GamePage.tsx`
- **Результат**: Тест `judge-buttons.spec.ts` проходит успешно

### 2. Игра не переходит в статус `answering` после нажатия кнопки
**Файл**: `tests/game-flow.spec.ts:7`
**Описание**: После нажатия кнопки игроком (`pressButton`), игра должна перейти в статус `answering`, но этого не происходит. Тест ожидает появления `.game-page__answering`, но таймаут превышен.

**Возможные причины**:
- WebSocket событие `BUTTON_PRESSED` не обрабатывается корректно
- Игра не переходит в статус `answering` после получения события
- Проблема с синхронизацией состояния между клиентом и сервером

**Статус**: ✅ **ИСПРАВЛЕНО** (13.12.2025)
- **Причина**: Та же ошибка React #310 - компонент не рендерился из-за нарушения правил хуков
- **Решение**: Исправлена ошибка React #310, увеличен таймаут в `waitForGameStart`
- **Результат**: Тест `game-flow.spec.ts` проходит успешно

